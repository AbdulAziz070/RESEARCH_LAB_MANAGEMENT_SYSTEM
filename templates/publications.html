{% extends "base.html" %}
{% block content %}
<div class="d-flex justify-content-between align-items-center mb-3">
  <h2>Publications</h2>
  <a href="{{ url_for('add_publication') }}" class="btn btn-primary">
    <i class="fa-solid fa-plus"></i> Add Publication
  </a>
</div>

<table class="table table-striped table-hover">
  <thead class="table-dark">
    <tr>
      <th>PubID</th>
      <th>Title</th>
      <th>Venue</th>
      <th>Date</th>
      <th>DOI</th>
      <th>Actions</th>
    </tr>
  </thead>
  <tbody>
    {% for p in publications %}
    <tr>
      <td>{{ p[0] }}</td>
      <td>{{ p[1] }}</td>
      <td>{{ p[2] }}</td>
      <td>{{ p[3] }}</td>
      <td>
        {% if p[4] %}
          <a href="https://doi.org/{{ p[4] }}" target="_blank">{{ p[4] }}</a>
        {% else %}
          -
        {% endif %}
      </td>
      <td>
        <div class="d-flex gap-2">
          <a href="{{ url_for('edit_publication', pubid=p[0]) }}" class="btn btn-sm btn-warning">
            <i class="fa-solid fa-pen"></i> Edit
          </a>
          <form action="{{ url_for('delete_publication', pubid=p[0]) }}" method="post"
                onsubmit="return confirm('Delete this publication?');">
            <button class="btn btn-sm btn-danger">
              <i class="fa-solid fa-trash"></i> Delete
            </button>
          </form>
        </div>
      </td>
    </tr>
    {% endfor %}
  </tbody>
</table>
{% endblock %}